
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../img/favicon.svg">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-7.3.3">
    
    
      
        <title>Deploying Example eBPF Programs On Kubernetes - bpfman</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.5143246d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploying-example-ebpf-programs-on-kubernetes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="bpfman" class="md-header__button md-logo" aria-label="bpfman" data-md-component="logo">
      
  <img src="../../img/favicon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            bpfman
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deploying Example eBPF Programs On Kubernetes
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/bpfman/bpfman" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Introduction
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../building-bpfman/" class="md-tabs__link md-tabs__link--active">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../governance/CONTRIBUTING/" class="md-tabs__link">
        Developer Guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../design/daemonless/" class="md-tabs__link">
        Design
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../governance/MEETINGS/" class="md-tabs__link">
        Community
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../blog/" class="md-tabs__link">
        Blog
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="bpfman" class="md-nav__button md-logo" aria-label="bpfman" data-md-component="logo">
      
  <img src="../../img/favicon.svg" alt="logo">

    </a>
    bpfman
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/bpfman/bpfman" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../building-bpfman/" class="md-nav__link">
        Setup and Building
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../running-release/" class="md-nav__link">
        Run bpfman From Release Image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        Bpfman on Linux Tutorial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli-guide/" class="md-nav__link">
        CLI Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf/" class="md-nav__link">
        Example eBPF Programs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf-local/" class="md-nav__link">
        Deploying Example eBPF Programs On Local Host
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Deploying Example eBPF Programs On Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Deploying Example eBPF Programs On Kubernetes
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#loading-ebpf-bytecode-on-kubernetes" class="md-nav__link">
    Loading eBPF Bytecode On Kubernetes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-userspace-container-on-kubernetes" class="md-nav__link">
    Loading Userspace Container On Kubernetes
  </a>
  
    <nav class="md-nav" aria-label="Loading Userspace Container On Kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loading-a-userspace-container-image" class="md-nav__link">
    Loading A Userspace Container Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automated-deployment" class="md-nav__link">
    Automated Deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-a-userspace-container-image" class="md-nav__link">
    Building A Userspace Container Image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Developer Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developer Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/CONTRIBUTING/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/REVIEWING/" class="md-nav__link">
        Reviewing Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/operator-quick-start/" class="md-nav__link">
        Deploying the bpfman-operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/develop-operator/" class="md-nav__link">
        Developing the bpfman-operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/api-spec/" class="md-nav__link">
        Kubernetes CRD API-Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/shipping-bytecode/" class="md-nav__link">
        eBPF Bytecode Image Specifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/image-build/" class="md-nav__link">
        bpfman Container Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/documentation/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/linux-capabilities/" class="md-nav__link">
        Linux Capabilities
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/debugging/" class="md-nav__link">
        Debugging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/release/" class="md-nav__link">
        Releasing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Design
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Design" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Design
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../design/daemonless/" class="md-nav__link">
        Daemonless
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Community
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Community" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/MEETINGS/" class="md-nav__link">
        Meetings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/GOVERNANCE/" class="md-nav__link">
        Governance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/CODE_OF_CONDUCT/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/MAINTAINERS/" class="md-nav__link">
        Maintainers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/SECURITY/" class="md-nav__link">
        Security
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../blog/">Blog</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Blog" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#loading-ebpf-bytecode-on-kubernetes" class="md-nav__link">
    Loading eBPF Bytecode On Kubernetes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-userspace-container-on-kubernetes" class="md-nav__link">
    Loading Userspace Container On Kubernetes
  </a>
  
    <nav class="md-nav" aria-label="Loading Userspace Container On Kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loading-a-userspace-container-image" class="md-nav__link">
    Loading A Userspace Container Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automated-deployment" class="md-nav__link">
    Automated Deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-a-userspace-container-image" class="md-nav__link">
    Building A Userspace Container Image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/bpfman/bpfman/edit/main/docs/getting-started/example-bpf-k8s.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="deploying-example-ebpf-programs-on-kubernetes">Deploying Example eBPF Programs On Kubernetes</h1>
<p>This section will describe loading bytecode on a Kubernetes cluster and launching the userspace
program.
The approach is slightly different when running on a Kubernetes cluster.
The eBPF bytecode should be loaded by an administrator, not the userspace program itself.</p>
<p>This section assumes there is already a Kubernetes cluster running and <code>bpfman</code> is running in the cluster.
See <a href="../../developer-guide/operator-quick-start/">Deploying the bpfman-operator</a> for details on
deploying bpfman on a Kubernetes cluster, but the quickest solution is to run a Kubernetes KIND Cluster:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-0-1"></a><span class="go">cd bpfman/bpfman-operator/</span>
<a name="__codelineno-0-2"></a><span class="go">make run-on-kind</span>
</code></pre></div>
<h3 id="loading-ebpf-bytecode-on-kubernetes">Loading eBPF Bytecode On Kubernetes</h3>
<p><img alt="go-xdp-counter On Kubernetes" src="../../img/gocounter-on-k8s.png" /></p>
<p>Instead of using the userspace program or CLI to load the eBPF bytecode as done in previous sections,
the bytecode will be loaded by creating a Kubernetes CRD object.
There is a CRD object for each eBPF program type bpfman supports.
Edit the sample yaml files to customize any configuration values:</p>
<ul>
<li>TcProgram CRD: <a href="https://github.com/bpfman/bpfman/tree/main/examples/config/base/go-tc-counter/bytecode.yaml">go-tc-counter/bytecode.yaml</a></li>
<li>TracepointProgram CRD: <a href="https://github.com/bpfman/bpfman/tree/main/examples/config/base/go-tracepoint-counter/bytecode.yaml">go-tracepoint-counter/bytecode.yaml</a></li>
<li>XdpProgram CRD: <a href="https://github.com/bpfman/bpfman/tree/main/examples/config/base/go-xdp-counter/bytecode.yaml">go-xdp-counter/bytecode.yaml</a></li>
<li>KprobeProgram CRD: <a href="https://github.com/bpfman/bpfman/blob/main/bpfman-operator/config/samples/bpfman.io_v1alpha1_kprobe_kprobeprogram.yaml">bpfman-operator/config/samples/bpfman.io_v1alpha1_kprobe_kprobeprogram.yaml</a></li>
<li>UprobeProgram CRD: <a href="https://github.com/bpfman/bpfman/blob/main/bpfman-operator/config/samples/bpfman.io_v1alpha1_uprobe_uprobeprogram.yaml">bpfman-operator/config/samples/bpfman.io_v1alpha1_uprobe_uprobeprogram.yaml</a></li>
</ul>
<p>Sample bytecode yaml with XdpProgram CRD:
<div class="highlight"><pre><span></span><code><a name="__codelineno-1-1"></a><span class="go">cat examples/config/base/go-xdp-counter/bytecode.yaml</span>
<a name="__codelineno-1-2"></a><span class="go">apiVersion: bpfman.io/v1alpha1</span>
<a name="__codelineno-1-3"></a><span class="go">kind: XdpProgram</span>
<a name="__codelineno-1-4"></a><span class="go">metadata:</span>
<a name="__codelineno-1-5"></a><span class="go">  labels:</span>
<a name="__codelineno-1-6"></a><span class="go">    app.kubernetes.io/name: xdpprogram</span>
<a name="__codelineno-1-7"></a><span class="go">  name: go-xdp-counter-example</span>
<a name="__codelineno-1-8"></a><span class="go">spec:</span>
<a name="__codelineno-1-9"></a><span class="go">  name: xdp_stats</span>
<a name="__codelineno-1-10"></a><span class="gp">  #</span> Select all nodes
<a name="__codelineno-1-11"></a><span class="go">  nodeselector: {}</span>
<a name="__codelineno-1-12"></a><span class="go">  interfaceselector:</span>
<a name="__codelineno-1-13"></a><span class="go">    primarynodeinterface: true</span>
<a name="__codelineno-1-14"></a><span class="go">  priority: 55</span>
<a name="__codelineno-1-15"></a><span class="go">  bytecode:</span>
<a name="__codelineno-1-16"></a><span class="go">    image:</span>
<a name="__codelineno-1-17"></a><span class="go">      url: quay.io/bpfman-bytecode/go-xdp-counter:latest</span>
</code></pre></div></p>
<p>Note that all the sample yaml files are configured with the bytecode running on all nodes
(<code>nodeselector: {}</code>).
This can be change to run on specific nodes, but the DaemonSet yaml for the userspace program, which
is described below, should have an equivalent change.
Make any changes to the <code>go-xdp-counter-bytecode.yaml</code>, then repeat for <code>go-tc-counter-bytecode.yaml</code>
and <code>go-tracepoint-counter-bytecode.yaml</code> and then apply the updated yamls:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-2-1"></a><span class="go">kubectl apply -f examples/config/base/go-xdp-counter/bytecode.yaml</span>
<a name="__codelineno-2-2"></a><span class="go">  xdpprogram.bpfman.io/go-xdp-counter-example created</span>
<a name="__codelineno-2-3"></a>
<a name="__codelineno-2-4"></a><span class="go">kubectl apply -f examples/config/base/go-tc-counter/bytecode.yaml</span>
<a name="__codelineno-2-5"></a><span class="go">  tcprogram.bpfman.io/go-tc-counter-example created</span>
<a name="__codelineno-2-6"></a>
<a name="__codelineno-2-7"></a><span class="go">kubectl apply -f examples/config/base/go-tracepoint-counter/bytecode.yaml</span>
<a name="__codelineno-2-8"></a><span class="go">  tracepointprogram.bpfman.io/go-tracepoint-counter-example created</span>
</code></pre></div>
<p>Following the diagram for XDP example (Blue numbers):</p>
<ol>
<li>The user creates a <code>XdpProgram</code> object with the parameters
associated with the eBPF bytecode, like interface, priority and BFP bytecode image.
The name of the <code>XdpProgram</code> object in this example is <code>go-xdp-counter-example</code>.
The <code>XdpProgram</code> is applied using <code>kubectl</code>, but in a more practical deployment, the <code>XdpProgram</code>
would be applied by the application or a controller.</li>
<li><code>bpfman-agent</code>, running on each node, is watching for all changes to <code>XdpProgram</code> objects.
When it sees a <code>XdpProgram</code> object created or modified, it makes sure a <code>BpfProgram</code> object for that
node exists.
The name of the <code>BpfProgram</code> object is the <code>XdpProgram</code> object name with the node name and interface or
attach point appended.</li>
<li><code>bpfman-agent</code> then determines if it should be running on the given node, loads or unloads as needed
by making gRPC calls the <code>bpfman</code>.
<code>bpfman</code> behaves the same as described in the running locally example.</li>
<li><code>bpfman-agent</code> finally updates the status of the <code>BpfProgram</code> object.</li>
<li><code>bpfman-operator</code> watches all <code>BpfProgram</code> objects, and updates the status of the <code>XdpProgram</code>
object indicating if the eBPF program has been applied to all the desired nodes or not.</li>
</ol>
<p>To retrieve information on the <code>XdpProgram</code> objects:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-3-1"></a><span class="go">kubectl get xdpprograms</span>
<a name="__codelineno-3-2"></a><span class="go">NAME                     PRIORITY   DIRECTION</span>
<a name="__codelineno-3-3"></a><span class="go">go-xdp-counter-example   55</span>
<a name="__codelineno-3-4"></a>
<a name="__codelineno-3-5"></a>
<a name="__codelineno-3-6"></a><span class="go">kubectl get xdpprograms go-xdp-counter-example -o yaml</span>
<a name="__codelineno-3-7"></a><span class="go">apiVersion: bpfman.io/v1alpha1</span>
<a name="__codelineno-3-8"></a><span class="go">kind: XdpProgram</span>
<a name="__codelineno-3-9"></a><span class="go">metadata:</span>
<a name="__codelineno-3-10"></a><span class="go">  annotations:</span>
<a name="__codelineno-3-11"></a><span class="go">    kubectl.kubernetes.io/last-applied-configuration: |</span>
<a name="__codelineno-3-12"></a><span class="go">      {&quot;apiVersion&quot;:&quot;bpfman.io/v1alpha1&quot;,&quot;kind&quot;:&quot;XdpProgram&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{},&quot;labels&quot;:{&quot;app.kubernetes.io/name&quot;:&quot;xdpprogram&quot;},&quot;name&quot;:&quot;go-xdp-counter-example&quot;},&quot;spec&quot;:{&quot;bpffunctionname&quot;:&quot;xdp_stats&quot;,&quot;bytecode&quot;:{&quot;image&quot;:{&quot;url&quot;:&quot;quay.io/bpfman-bytecode/go-xdp-counter:latest&quot;}},&quot;interfaceselector&quot;:{&quot;primarynodeinterface&quot;:true},&quot;nodeselector&quot;:{},&quot;priority&quot;:55}}</span>
<a name="__codelineno-3-13"></a><span class="go">  creationTimestamp: &quot;2023-11-06T21:05:15Z&quot;</span>
<a name="__codelineno-3-14"></a><span class="go">  finalizers:</span>
<a name="__codelineno-3-15"></a><span class="go">  - bpfman.io.operator/finalizer</span>
<a name="__codelineno-3-16"></a><span class="go">  generation: 2</span>
<a name="__codelineno-3-17"></a><span class="go">  labels:</span>
<a name="__codelineno-3-18"></a><span class="go">    app.kubernetes.io/name: xdpprogram</span>
<a name="__codelineno-3-19"></a><span class="go">  name: go-xdp-counter-example</span>
<a name="__codelineno-3-20"></a><span class="go">  resourceVersion: &quot;3103&quot;</span>
<a name="__codelineno-3-21"></a><span class="go">  uid: edd45e2e-a40b-4668-ac76-c1f1eb63a23b</span>
<a name="__codelineno-3-22"></a><span class="go">spec:</span>
<a name="__codelineno-3-23"></a><span class="go">  bpffunctionname: xdp_stats</span>
<a name="__codelineno-3-24"></a><span class="go">  bytecode:</span>
<a name="__codelineno-3-25"></a><span class="go">    image:</span>
<a name="__codelineno-3-26"></a><span class="go">      imagepullpolicy: IfNotPresent</span>
<a name="__codelineno-3-27"></a><span class="go">      url: quay.io/bpfman-bytecode/go-xdp-counter:latest</span>
<a name="__codelineno-3-28"></a><span class="go">  interfaceselector:</span>
<a name="__codelineno-3-29"></a><span class="go">    primarynodeinterface: true</span>
<a name="__codelineno-3-30"></a><span class="go">  mapownerselector: {}</span>
<a name="__codelineno-3-31"></a><span class="go">  nodeselector: {}</span>
<a name="__codelineno-3-32"></a><span class="go">  priority: 55</span>
<a name="__codelineno-3-33"></a><span class="go">  proceedon:</span>
<a name="__codelineno-3-34"></a><span class="go">  - pass</span>
<a name="__codelineno-3-35"></a><span class="go">  - dispatcher_return</span>
<a name="__codelineno-3-36"></a><span class="go">status:</span>
<a name="__codelineno-3-37"></a><span class="go">  conditions:</span>
<a name="__codelineno-3-38"></a><span class="go">  - lastTransitionTime: &quot;2023-11-06T21:05:21Z&quot;</span>
<a name="__codelineno-3-39"></a><span class="go">    message: bpfProgramReconciliation Succeeded on all nodes</span>
<a name="__codelineno-3-40"></a><span class="go">    reason: ReconcileSuccess</span>
<a name="__codelineno-3-41"></a><span class="go">    status: &quot;True&quot;</span>
<a name="__codelineno-3-42"></a><span class="go">    type: ReconcileSuccess</span>
</code></pre></div>
<p>To retrieve information on the <code>BpfProgram</code> objects:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-4-1"></a><span class="go">kubectl get bpfprograms</span>
<a name="__codelineno-4-2"></a><span class="go">NAME                                                                                  AGE</span>
<a name="__codelineno-4-3"></a><span class="go">:</span>
<a name="__codelineno-4-4"></a><span class="go">4822-bpfman-deployment-control-plane                                                    60m</span>
<a name="__codelineno-4-5"></a><span class="go">4825-bpfman-deployment-control-plane                                                    60m</span>
<a name="__codelineno-4-6"></a><span class="go">go-tc-counter-example-bpfman-deployment-control-plane-eth0                              61m</span>
<a name="__codelineno-4-7"></a><span class="go">go-tracepoint-counter-example-bpfman-deployment-control-plane-syscalls-sys-enter-kill   61m</span>
<a name="__codelineno-4-8"></a><span class="go">go-xdp-counter-example-bpfman-deployment-control-plane-eth0                             61m</span>
<a name="__codelineno-4-9"></a><span class="go">go-xdp-counter-sharing-map-example-bpfman-deployment-control-plane-eth0                 60m</span>
<a name="__codelineno-4-10"></a><span class="go">tc-dispatcher-4805-bpfman-deployment-control-plane                                      60m</span>
<a name="__codelineno-4-11"></a><span class="go">xdp-dispatcher-4816-bpfman-deployment-control-plane                                     60m</span>
<a name="__codelineno-4-12"></a>
<a name="__codelineno-4-13"></a>
<a name="__codelineno-4-14"></a><span class="go">kubectl get go-xdp-counter-example-bpfman-deployment-control-plane-eth0 -o yaml</span>
<a name="__codelineno-4-15"></a><span class="go">apiVersion: bpfman.io/v1alpha1</span>
<a name="__codelineno-4-16"></a><span class="go">kind: BpfProgram</span>
<a name="__codelineno-4-17"></a><span class="go">metadata:</span>
<a name="__codelineno-4-18"></a><span class="go">  annotations:</span>
<a name="__codelineno-4-19"></a><span class="go">    bpfman.io.xdpprogramcontroller/interface: eth0</span>
<a name="__codelineno-4-20"></a><span class="go">    bpfman.io/ProgramId: &quot;4801&quot;</span>
<a name="__codelineno-4-21"></a><span class="go">  creationTimestamp: &quot;2023-11-06T21:05:15Z&quot;</span>
<a name="__codelineno-4-22"></a><span class="go">  finalizers:</span>
<a name="__codelineno-4-23"></a><span class="go">  - bpfman.io.xdpprogramcontroller/finalizer</span>
<a name="__codelineno-4-24"></a><span class="go">  generation: 1</span>
<a name="__codelineno-4-25"></a><span class="go">  labels:</span>
<a name="__codelineno-4-26"></a><span class="go">    bpfman.io/ownedByProgram: go-xdp-counter-example</span>
<a name="__codelineno-4-27"></a><span class="go">    kubernetes.io/hostname: bpfman-deployment-control-plane</span>
<a name="__codelineno-4-28"></a><span class="go">  name: go-xdp-counter-example-bpfman-deployment-control-plane-eth0</span>
<a name="__codelineno-4-29"></a><span class="go">  ownerReferences:</span>
<a name="__codelineno-4-30"></a><span class="go">  - apiVersion: bpfman.io/v1alpha1</span>
<a name="__codelineno-4-31"></a><span class="go">    blockOwnerDeletion: true</span>
<a name="__codelineno-4-32"></a><span class="go">    controller: true</span>
<a name="__codelineno-4-33"></a><span class="go">    kind: XdpProgram</span>
<a name="__codelineno-4-34"></a><span class="go">    name: go-xdp-counter-example</span>
<a name="__codelineno-4-35"></a><span class="go">    uid: edd45e2e-a40b-4668-ac76-c1f1eb63a23b</span>
<a name="__codelineno-4-36"></a><span class="go">  resourceVersion: &quot;3102&quot;</span>
<a name="__codelineno-4-37"></a><span class="go">  uid: f7ffd156-168b-4dc8-be38-18c42626a631</span>
<a name="__codelineno-4-38"></a><span class="go">spec:</span>
<a name="__codelineno-4-39"></a><span class="go">  type: xdp</span>
<a name="__codelineno-4-40"></a><span class="go">status:</span>
<a name="__codelineno-4-41"></a><span class="go">  conditions:</span>
<a name="__codelineno-4-42"></a><span class="go">  - lastTransitionTime: &quot;2023-11-06T21:05:21Z&quot;</span>
<a name="__codelineno-4-43"></a><span class="go">    message: Successfully loaded bpfProgram</span>
<a name="__codelineno-4-44"></a><span class="go">    reason: bpfmanLoaded</span>
<a name="__codelineno-4-45"></a><span class="go">    status: &quot;True&quot;</span>
<a name="__codelineno-4-46"></a><span class="go">    type: Loaded</span>
</code></pre></div>
<h3 id="loading-userspace-container-on-kubernetes">Loading Userspace Container On Kubernetes</h3>
<p>Here, a userspace container is deployed to consume the map data generated by the
eBPF counter program.
bpfman provides a <a href="https://kubernetes-csi.github.io/docs/">Container Storage Interface (CSI)</a>
driver for exposing eBPF maps into a userspace container.
To avoid having to mount a host directory that contains the map pinned file into the container
and forcing the container to have permissions to access that host directory, the CSI driver
mounts the map at a specified location in the container.
All the examples use CSI, here is
<a href="https://github.com/bpfman/bpfman/tree/main/examples/config/base/go-xdp-counter/deployment.yaml">go-xdp-counter/deployment.yaml</a>
for reference:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-5-1"></a><span class="go">cd bpfman/examples/</span>
<a name="__codelineno-5-2"></a><span class="go">cat config/base/go-xdp-counter/deployment.yaml</span>
<a name="__codelineno-5-3"></a><span class="go">:</span>
<a name="__codelineno-5-4"></a><span class="go">---</span>
<a name="__codelineno-5-5"></a><span class="go">apiVersion: apps/v1</span>
<a name="__codelineno-5-6"></a><span class="go">kind: DaemonSet</span>
<a name="__codelineno-5-7"></a><span class="go">metadata:</span>
<a name="__codelineno-5-8"></a><span class="go">  name: go-xdp-counter-ds</span>
<a name="__codelineno-5-9"></a><span class="go">  namespace: go-xdp-counter</span>
<a name="__codelineno-5-10"></a><span class="go">  labels:</span>
<a name="__codelineno-5-11"></a><span class="go">    k8s-app: go-xdp-counter</span>
<a name="__codelineno-5-12"></a><span class="go">spec:</span>
<a name="__codelineno-5-13"></a><span class="go">  :</span>
<a name="__codelineno-5-14"></a><span class="go">  template:</span>
<a name="__codelineno-5-15"></a><span class="go">    :</span>
<a name="__codelineno-5-16"></a><span class="go">    spec:</span>
<a name="__codelineno-5-17"></a><span class="go">       :</span>
<a name="__codelineno-5-18"></a><span class="go">      containers:</span>
<a name="__codelineno-5-19"></a><span class="go">      - name: go-xdp-counter</span>
<a name="__codelineno-5-20"></a><span class="go">        :</span>
<a name="__codelineno-5-21"></a><span class="go">        volumeMounts:</span>
<a name="__codelineno-5-22"></a><span class="go">        - name: go-xdp-counter-maps                        &lt;==== 2) VolumeMount in container</span>
<a name="__codelineno-5-23"></a><span class="go">          mountPath: /run/xdp/maps                         &lt;==== 2a) Mount path in the container</span>
<a name="__codelineno-5-24"></a><span class="go">          readOnly: true</span>
<a name="__codelineno-5-25"></a><span class="go">      volumes:</span>
<a name="__codelineno-5-26"></a><span class="go">      - name: go-xdp-counter-maps                          &lt;==== 1) Volume describing the map</span>
<a name="__codelineno-5-27"></a><span class="go">        csi:</span>
<a name="__codelineno-5-28"></a><span class="go">          driver: csi.bpfman.io                             &lt;==== 1a) bpfman CSI Driver</span>
<a name="__codelineno-5-29"></a><span class="go">          volumeAttributes:</span>
<a name="__codelineno-5-30"></a><span class="go">            csi.bpfman.io/program: go-xdp-counter-example   &lt;==== 1b) eBPF Program owning the map</span>
<a name="__codelineno-5-31"></a><span class="go">            csi.bpfman.io/maps: xdp_stats_map               &lt;==== 1c) Map to be exposed to the container</span>
</code></pre></div>
<h4 id="loading-a-userspace-container-image">Loading A Userspace Container Image</h4>
<p>The userspace programs have been pre-built and can be found here:</p>
<ul>
<li><code>quay.io/bpfman-userspace/go-tc-counter:latest</code></li>
<li><code>quay.io/bpfman-userspace/go-tracepoint-counter:latest</code></li>
<li><code>quay.io/bpfman-userspace/go-xdp-counter:latest</code></li>
</ul>
<p>The example yaml files below are loading from these image.</p>
<ul>
<li><a href="https://github.com/bpfman/bpfman/tree/main/examples/config/base/go-tc-counter/deployment.yaml">go-tc-counter/deployment.yaml</a></li>
<li><a href="https://github.com/bpfman/bpfman/tree/main/examples/config/base/go-tracepoint-counter/deployment.yaml">go-tracepoint-counter/deployment.yaml</a></li>
<li><a href="https://github.com/bpfman/bpfman/tree/main/examples/config/base/go-xdp-counter/deployment.yaml">go-xdp-counter/deployment.yaml</a></li>
</ul>
<p>The userspace program in a Kubernetes Deployment doesn't interacts directly with <code>bpfman</code> like it
did in the local host deployment.
Instead, the userspace program running on each node, if needed, reads the <code>BpfProgram</code> object
from the KubeApiServer to gather additional information about the loaded eBPF program.
To interact with the KubeApiServer, RBAC must be setup properly to access the <code>BpfProgram</code>
object.
The <code>bpfman-operator</code> defined the yaml for several ClusterRoles that can be used to access the
different <code>bpfman</code> related CRD objects with different access rights.
The example userspace containers will use the <code>bpfprogram-viewer-role</code>, which allows Read-Only
access to the <code>BpfProgram</code> object.
This ClusterRole is created automatically by the <code>bpfman-operator</code>.</p>
<p>The remaining objects (NameSpace, ServiceAccount, ClusterRoleBinding and examples DaemonSet)
can be created for each program type as follows:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-6-1"></a><span class="go">cd bpfman/</span>
<a name="__codelineno-6-2"></a><span class="go">kubectl create -f examples/config/base/go-xdp-counter/deployment.yaml</span>
<a name="__codelineno-6-3"></a><span class="go">kubectl create -f examples/config/base/go-tc-counter/deployment.yaml</span>
<a name="__codelineno-6-4"></a><span class="go">kubectl create -f examples/config/base/go-tracepoint-counter/deployment.yaml</span>
</code></pre></div>
<p>Following the diagram for the XDP example (Green numbers):</p>
<ol>
<li>The userspace program queries the KubeApiServer for a specific <code>BpfProgram</code> object.</li>
<li>The userspace program verifies the <code>BpfProgram</code> has been loaded and uses the map to
periodically read the counter values.</li>
</ol>
<p>To see if the userspace programs are working, view the logs:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-7-1"></a><span class="go">NAMESPACE               NAME                              READY   STATUS    RESTARTS   AGE</span>
<a name="__codelineno-7-2"></a><span class="go">bpfman                    bpfman-daemon-jsgdh                 3/3     Running   0          11m</span>
<a name="__codelineno-7-3"></a><span class="go">bpfman                    bpfman-operator-6c5c8887f7-qk28x    2/2     Running   0          12m</span>
<a name="__codelineno-7-4"></a><span class="go">go-tc-counter           go-tc-counter-ds-9jv4g            1/1     Running   0          5m37s</span>
<a name="__codelineno-7-5"></a><span class="go">go-tracepoint-counter   go-tracepoint-counter-ds-2gzbt    1/1     Running   0          5m35s</span>
<a name="__codelineno-7-6"></a><span class="go">go-xdp-counter          go-xdp-counter-ds-2hs6g           1/1     Running   0          6m12s</span>
<a name="__codelineno-7-7"></a><span class="go">:</span>
<a name="__codelineno-7-8"></a>
<a name="__codelineno-7-9"></a><span class="go">kubectl logs -n go-xdp-counter go-xdp-counter-ds-2hs6g</span>
<a name="__codelineno-7-10"></a><span class="go">2023/11/06 20:27:16 2429 packets received</span>
<a name="__codelineno-7-11"></a><span class="go">2023/11/06 20:27:16 1328474 bytes received</span>
<a name="__codelineno-7-12"></a>
<a name="__codelineno-7-13"></a><span class="go">2023/11/06 20:27:19 2429 packets received</span>
<a name="__codelineno-7-14"></a><span class="go">2023/11/06 20:27:19 1328474 bytes received</span>
<a name="__codelineno-7-15"></a>
<a name="__codelineno-7-16"></a><span class="go">2023/11/06 20:27:22 2430 packets received</span>
<a name="__codelineno-7-17"></a><span class="go">2023/11/06 20:27:22 1328552 bytes received</span>
<a name="__codelineno-7-18"></a><span class="go">:</span>
</code></pre></div>
<p>To cleanup:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-8-1"></a><span class="go">kubectl delete -f examples/config/base/go-xdp-counter/deployment.yaml</span>
<a name="__codelineno-8-2"></a><span class="go">kubectl delete -f examples/config/base/go-xdp-counter/bytecode.yaml</span>
<a name="__codelineno-8-3"></a>
<a name="__codelineno-8-4"></a><span class="go">kubectl delete -f examples/config/base/go-tc-counter/deployment.yaml</span>
<a name="__codelineno-8-5"></a><span class="go">kubectl delete -f examples/config/base/go-tc-counter/bytecode.yaml</span>
<a name="__codelineno-8-6"></a>
<a name="__codelineno-8-7"></a><span class="go">kubectl delete -f examples/config/base/go-tracepoint-counter/deployment.yaml</span>
<a name="__codelineno-8-8"></a><span class="go">kubectl delete -f examples/config/base/go-tracepoint-counter/bytecode.yaml</span>
</code></pre></div>
<h4 id="automated-deployment">Automated Deployment</h4>
<p>The steps above are automated in the <code>Makefile</code> in the examples directory.
Run <code>make deploy</code> to load each of the example bytecode and userspace yaml files, then
<code>make undeploy</code> to unload them.</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-9-1"></a><span class="go">cd bpfman/examples/</span>
<a name="__codelineno-9-2"></a><span class="go">make deploy</span>
<a name="__codelineno-9-3"></a><span class="go">  sed &#39;s@URL_BC@quay.io/bpfman-bytecode/go-tc-counter:latest@&#39; config/default/go-tc-counter/patch.yaml.env &gt; config/default/go-tc-counter/patch.yaml</span>
<a name="__codelineno-9-4"></a><span class="go">  cd config/default/go-tc-counter &amp;&amp; /home/bmcfall/src/bpfman/examples/bin/kustomize edit set image quay.io/bpfman-userspace/go-tc-counter=quay.io/bpfman-userspace/go-tc-counter:latest</span>
<a name="__codelineno-9-5"></a><span class="go">  /home/bmcfall/src/bpfman/examples/bin/kustomize build config/default/go-tc-counter | kubectl apply -f -</span>
<a name="__codelineno-9-6"></a><span class="go">  namespace/go-tc-counter created</span>
<a name="__codelineno-9-7"></a><span class="go">  serviceaccount/bpfman-app-go-tc-counter created</span>
<a name="__codelineno-9-8"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io/bpfman-app-rolebinding-go-tc-counter created</span>
<a name="__codelineno-9-9"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io/privileged-scc-tc created</span>
<a name="__codelineno-9-10"></a><span class="go">  daemonset.apps/go-tc-counter-ds created</span>
<a name="__codelineno-9-11"></a><span class="go">  tcprogram.bpfman.io/go-tc-counter-example created</span>
<a name="__codelineno-9-12"></a><span class="go">  sed &#39;s@URL_BC@quay.io/bpfman-bytecode/go-tracepoint-counter:latest@&#39; config/default/go-tracepoint-counter/patch.yaml.env &gt; config/default/go-tracepoint-counter/patch.yaml</span>
<a name="__codelineno-9-13"></a><span class="go">  cd config/default/go-tracepoint-counter &amp;&amp; /home/bmcfall/src/bpfman/examples/bin/kustomize edit set image quay.io/bpfman-userspace/go-tracepoint-counter=quay.io/bpfman-userspace/go-tracepoint-counter:latest</span>
<a name="__codelineno-9-14"></a><span class="go">  /home/bmcfall/src/bpfman/examples/bin/kustomize build config/default/go-tracepoint-counter | kubectl apply -f -</span>
<a name="__codelineno-9-15"></a><span class="go">  namespace/go-tracepoint-counter created</span>
<a name="__codelineno-9-16"></a><span class="go">  serviceaccount/bpfman-app-go-tracepoint-counter created</span>
<a name="__codelineno-9-17"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io/bpfman-app-rolebinding-go-tracepoint-counter created</span>
<a name="__codelineno-9-18"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io/privileged-scc-tracepoint created</span>
<a name="__codelineno-9-19"></a><span class="go">  daemonset.apps/go-tracepoint-counter-ds created</span>
<a name="__codelineno-9-20"></a><span class="go">  tracepointprogram.bpfman.io/go-tracepoint-counter-example created</span>
<a name="__codelineno-9-21"></a><span class="go">  sed &#39;s@URL_BC@quay.io/bpfman-bytecode/go-xdp-counter:latest@&#39; config/default/go-xdp-counter/patch.yaml.env &gt; config/default/go-xdp-counter/patch.yaml</span>
<a name="__codelineno-9-22"></a><span class="go">  cd config/default/go-xdp-counter &amp;&amp; /home/bmcfall/src/bpfman/examples/bin/kustomize edit set image quay.io/bpfman-userspace/go-xdp-counter=quay.io/bpfman-userspace/go-xdp-counter:latest</span>
<a name="__codelineno-9-23"></a><span class="go">  /home/bmcfall/src/bpfman/examples/bin/kustomize build config/default/go-xdp-counter | kubectl apply -f -</span>
<a name="__codelineno-9-24"></a><span class="go">  namespace/go-xdp-counter unchanged</span>
<a name="__codelineno-9-25"></a><span class="go">  serviceaccount/bpfman-app-go-xdp-counter unchanged</span>
<a name="__codelineno-9-26"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io/bpfman-app-rolebinding-go-xdp-counter unchanged</span>
<a name="__codelineno-9-27"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io/privileged-scc-xdp unchanged</span>
<a name="__codelineno-9-28"></a><span class="go">  daemonset.apps/go-xdp-counter-ds configured</span>
<a name="__codelineno-9-29"></a><span class="go">  xdpprogram.bpfman.io/go-xdp-counter-example unchanged</span>
<a name="__codelineno-9-30"></a><span class="go">  sed &#39;s@URL_BC@quay.io/bpfman-bytecode/go-xdp-counter:latest@&#39; config/default/go-xdp-counter-sharing-map/patch.yaml.env &gt; config/default/go-xdp-counter-sharing-map/patch.yaml</span>
<a name="__codelineno-9-31"></a><span class="go">  cd config/default/go-xdp-counter-sharing-map &amp;&amp; /home/bmcfall/src/bpfman/examples/bin/kustomize edit set image quay.io/bpfman-userspace/go-xdp-counter=quay.io/bpfman-userspace/go-xdp-counter:latest</span>
<a name="__codelineno-9-32"></a><span class="go">  /home/bmcfall/src/bpfman/examples/bin/kustomize build config/default/go-xdp-counter-sharing-map | kubectl apply -f -</span>
<a name="__codelineno-9-33"></a><span class="go">  xdpprogram.bpfman.io/go-xdp-counter-sharing-map-example created</span>
<a name="__codelineno-9-34"></a>
<a name="__codelineno-9-35"></a><span class="gp">#</span> Test Away ...
<a name="__codelineno-9-36"></a>
<a name="__codelineno-9-37"></a><span class="go">make undeploy</span>
<a name="__codelineno-9-38"></a><span class="go">  sed &#39;s@URL_BC@quay.io/bpfman-bytecode/go-tc-counter:latest@&#39; config/default/go-tc-counter/patch.yaml.env &gt; config/default/go-tc-counter/patch.yaml</span>
<a name="__codelineno-9-39"></a><span class="go">  cd config/default/go-tc-counter &amp;&amp; /home/bmcfall/src/bpfman/examples/bin/kustomize edit set image quay.io/bpfman-userspace/go-tc-counter=quay.io/bpfman-userspace/go-tc-counter:latest</span>
<a name="__codelineno-9-40"></a><span class="go">  /home/bmcfall/src/bpfman/examples/bin/kustomize build config/default/go-tc-counter | kubectl delete --ignore-not-found=false -f -</span>
<a name="__codelineno-9-41"></a><span class="go">  namespace &quot;go-tc-counter&quot; deleted</span>
<a name="__codelineno-9-42"></a><span class="go">  serviceaccount &quot;bpfman-app-go-tc-counter&quot; deleted</span>
<a name="__codelineno-9-43"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io &quot;bpfman-app-rolebinding-go-tc-counter&quot; deleted</span>
<a name="__codelineno-9-44"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io &quot;privileged-scc-tc&quot; deleted</span>
<a name="__codelineno-9-45"></a><span class="go">  daemonset.apps &quot;go-tc-counter-ds&quot; deleted</span>
<a name="__codelineno-9-46"></a><span class="go">  tcprogram.bpfman.io &quot;go-tc-counter-example&quot; deleted</span>
<a name="__codelineno-9-47"></a><span class="go">  sed &#39;s@URL_BC@quay.io/bpfman-bytecode/go-tracepoint-counter:latest@&#39; config/default/go-tracepoint-counter/patch.yaml.env &gt; config/default/go-tracepoint-counter/patch.yaml</span>
<a name="__codelineno-9-48"></a><span class="go">  cd config/default/go-tracepoint-counter &amp;&amp; /home/bmcfall/src/bpfman/examples/bin/kustomize edit set image quay.io/bpfman-userspace/go-tracepoint-counter=quay.io/bpfman-userspace/go-tracepoint-counter:latest</span>
<a name="__codelineno-9-49"></a><span class="go">  /home/bmcfall/src/bpfman/examples/bin/kustomize build config/default/go-tracepoint-counter | kubectl delete --ignore-not-found=false -f -</span>
<a name="__codelineno-9-50"></a><span class="go">  namespace &quot;go-tracepoint-counter&quot; deleted</span>
<a name="__codelineno-9-51"></a><span class="go">  serviceaccount &quot;bpfman-app-go-tracepoint-counter&quot; deleted</span>
<a name="__codelineno-9-52"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io &quot;bpfman-app-rolebinding-go-tracepoint-counter&quot; deleted</span>
<a name="__codelineno-9-53"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io &quot;privileged-scc-tracepoint&quot; deleted</span>
<a name="__codelineno-9-54"></a><span class="go">  daemonset.apps &quot;go-tracepoint-counter-ds&quot; deleted</span>
<a name="__codelineno-9-55"></a><span class="go">  tracepointprogram.bpfman.io &quot;go-tracepoint-counter-example&quot; deleted</span>
<a name="__codelineno-9-56"></a><span class="go">  sed &#39;s@URL_BC@quay.io/bpfman-bytecode/go-xdp-counter:latest@&#39; config/default/go-xdp-counter/patch.yaml.env &gt; config/default/go-xdp-counter/patch.yaml</span>
<a name="__codelineno-9-57"></a><span class="go">  cd config/default/go-xdp-counter &amp;&amp; /home/bmcfall/src/bpfman/examples/bin/kustomize edit set image quay.io/bpfman-userspace/go-xdp-counter=quay.io/bpfman-userspace/go-xdp-counter:latest</span>
<a name="__codelineno-9-58"></a><span class="go">  /home/bmcfall/src/bpfman/examples/bin/kustomize build config/default/go-xdp-counter | kubectl delete --ignore-not-found=false -f -</span>
<a name="__codelineno-9-59"></a><span class="go">  namespace &quot;go-xdp-counter&quot; deleted</span>
<a name="__codelineno-9-60"></a><span class="go">  serviceaccount &quot;bpfman-app-go-xdp-counter&quot; deleted</span>
<a name="__codelineno-9-61"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io &quot;bpfman-app-rolebinding-go-xdp-counter&quot; deleted</span>
<a name="__codelineno-9-62"></a><span class="go">  clusterrolebinding.rbac.authorization.k8s.io &quot;privileged-scc-xdp&quot; deleted</span>
<a name="__codelineno-9-63"></a><span class="go">  daemonset.apps &quot;go-xdp-counter-ds&quot; deleted</span>
<a name="__codelineno-9-64"></a><span class="go">  xdpprogram.bpfman.io &quot;go-xdp-counter-example&quot; deleted</span>
<a name="__codelineno-9-65"></a><span class="go">  sed &#39;s@URL_BC@quay.io/bpfman-bytecode/go-xdp-counter:latest@&#39; config/default/go-xdp-counter-sharing-map/patch.yaml.env &gt; config/default/go-xdp-counter-sharing-map/patch.yaml</span>
<a name="__codelineno-9-66"></a><span class="go">  cd config/default/go-xdp-counter-sharing-map &amp;&amp; /home/bmcfall/src/bpfman/examples/bin/kustomize edit set image quay.io/bpfman-userspace/go-xdp-counter=quay.io/bpfman-userspace/go-xdp-counter:latest</span>
<a name="__codelineno-9-67"></a><span class="go">  /home/bmcfall/src/bpfman/examples/bin/kustomize build config/default/go-xdp-counter-sharing-map | kubectl delete --ignore-not-found=false -f -</span>
<a name="__codelineno-9-68"></a><span class="go">  xdpprogram.bpfman.io &quot;go-xdp-counter-sharing-map-example&quot; deleted</span>
</code></pre></div>
<p>Individual examples can be loaded and unloaded as well, for example <code>make deploy-xdp</code> and
<code>make undeploy-xdp</code>.
To see the full set of available commands, run <code>make help</code>:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-10-1"></a><span class="go">make help</span>
<a name="__codelineno-10-2"></a>
<a name="__codelineno-10-3"></a><span class="go">Usage:</span>
<a name="__codelineno-10-4"></a><span class="go">  make &lt;target&gt;</span>
<a name="__codelineno-10-5"></a><span class="go">  make deploy TAG=v0.2.0</span>
<a name="__codelineno-10-6"></a><span class="go">  make deploy-xdp IMAGE_XDP_US=quay.io/user1/go-xdp-counter-userspace:test</span>
<a name="__codelineno-10-7"></a>
<a name="__codelineno-10-8"></a><span class="go">General</span>
<a name="__codelineno-10-9"></a><span class="go">  help             Display this help.</span>
<a name="__codelineno-10-10"></a>
<a name="__codelineno-10-11"></a><span class="go">Local Dependencies</span>
<a name="__codelineno-10-12"></a><span class="go">  kustomize        Download kustomize locally if necessary.</span>
<a name="__codelineno-10-13"></a>
<a name="__codelineno-10-14"></a><span class="go">Development</span>
<a name="__codelineno-10-15"></a><span class="go">  fmt              Run go fmt against code.</span>
<a name="__codelineno-10-16"></a><span class="go">  verify           Verify all the autogenerated code</span>
<a name="__codelineno-10-17"></a>
<a name="__codelineno-10-18"></a><span class="go">Build</span>
<a name="__codelineno-10-19"></a><span class="go">  build            Build all the userspace example code.</span>
<a name="__codelineno-10-20"></a><span class="go">  generate         Run `go generate` to build the bytecode for each of the examples.</span>
<a name="__codelineno-10-21"></a><span class="go">  build-us-images  Build all example userspace images</span>
<a name="__codelineno-10-22"></a><span class="go">  build-bc-images  Build bytecode example userspace images</span>
<a name="__codelineno-10-23"></a><span class="go">  push-us-images   Push all example userspace images</span>
<a name="__codelineno-10-24"></a><span class="go">  push-bc-images   Push all example userspace images</span>
<a name="__codelineno-10-25"></a><span class="go">  load-us-images-kind  Build and load all example userspace images into kind</span>
<a name="__codelineno-10-26"></a>
<a name="__codelineno-10-27"></a><span class="go">Deployment Variables (not commands)</span>
<a name="__codelineno-10-28"></a><span class="go">  TAG              Used to set all images to a fixed tag. Example: make deploy TAG=v0.2.0</span>
<a name="__codelineno-10-29"></a><span class="go">  IMAGE_TC_BC      TC Bytecode image. Example: make deploy-tc IMAGE_TC_BC=quay.io/user1/go-tc-counter-bytecode:test</span>
<a name="__codelineno-10-30"></a><span class="go">  IMAGE_TC_US      TC Userspace image. Example: make deploy-tc IMAGE_TC_US=quay.io/user1/go-tc-counter-userspace:test</span>
<a name="__codelineno-10-31"></a><span class="go">  IMAGE_TP_BC      Tracepoint Bytecode image. Example: make deploy-tracepoint IMAGE_TP_BC=quay.io/user1/go-tracepoint-counter-bytecode:test</span>
<a name="__codelineno-10-32"></a><span class="go">  IMAGE_TP_US      Tracepoint Userspace image. Example: make deploy-tracepoint IMAGE_TP_US=quay.io/user1/go-tracepoint-counter-userspace:test</span>
<a name="__codelineno-10-33"></a><span class="go">  IMAGE_XDP_BC     XDP Bytecode image. Example: make deploy-xdp IMAGE_XDP_BC=quay.io/user1/go-xdp-counter-bytecode:test</span>
<a name="__codelineno-10-34"></a><span class="go">  IMAGE_XDP_US     XDP Userspace image. Example: make deploy-xdp IMAGE_XDP_US=quay.io/user1/go-xdp-counter-userspace:test</span>
<a name="__codelineno-10-35"></a><span class="go">  KIND_CLUSTER_NAME  Name of the deployed cluster to load example images to, defaults to `bpfman-deployment`</span>
<a name="__codelineno-10-36"></a><span class="go">  ignore-not-found  For any undeploy command, set to true to ignore resource not found errors during deletion. Example: make undeploy ignore-not-found=true</span>
<a name="__codelineno-10-37"></a>
<a name="__codelineno-10-38"></a><span class="go">Deployment</span>
<a name="__codelineno-10-39"></a><span class="go">  deploy-tc        Deploy go-tc-counter to the cluster specified in ~/.kube/config.</span>
<a name="__codelineno-10-40"></a><span class="go">  undeploy-tc      Undeploy go-tc-counter from the cluster specified in ~/.kube/config.</span>
<a name="__codelineno-10-41"></a><span class="go">  deploy-tracepoint  Deploy go-tracepoint-counter to the cluster specified in ~/.kube/config.</span>
<a name="__codelineno-10-42"></a><span class="go">  undeploy-tracepoint  Undeploy go-tracepoint-counter from the cluster specified in ~/.kube/config.</span>
<a name="__codelineno-10-43"></a><span class="go">  deploy-xdp       Deploy go-xdp-counter to the cluster specified in ~/.kube/config.</span>
<a name="__codelineno-10-44"></a><span class="go">  undeploy-xdp     Undeploy go-xdp-counter from the cluster specified in ~/.kube/config.</span>
<a name="__codelineno-10-45"></a><span class="go">  deploy-xdp-ms    Deploy go-xdp-counter-sharing-map (shares map with go-xdp-counter) to the cluster specified in ~/.kube/config.</span>
<a name="__codelineno-10-46"></a><span class="go">  undeploy-xdp-ms  Undeploy go-xdp-counter-sharing-map from the cluster specified in ~/.kube/config.</span>
<a name="__codelineno-10-47"></a><span class="go">  deploy           Deploy all examples to the cluster specified in ~/.kube/config.</span>
<a name="__codelineno-10-48"></a><span class="go">  undeploy         Undeploy all examples to the cluster specified in ~/.kube/config.</span>
</code></pre></div>
<h4 id="building-a-userspace-container-image">Building A Userspace Container Image</h4>
<p>To build the userspace examples in a container instead of using the pre-built ones,
from the bpfman code source directory (<code>quay.io/bpfman-userspace/</code>), run the following build commands:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-11-1"></a><span class="go">  cd bpfman/examples</span>
<a name="__codelineno-11-2"></a><span class="go">  make IMAGE_TC_US=quay.io/$USER/go-tc-counter:latest \</span>
<a name="__codelineno-11-3"></a><span class="go">    IMAGE_TP_US=quay.io/$USER/go-tracepoint-counter:latest \</span>
<a name="__codelineno-11-4"></a><span class="go">    IMAGE_XDP_US=quay.io/$USER/go-xdp-counter:latest \</span>
<a name="__codelineno-11-5"></a><span class="go">    build-us-images</span>
</code></pre></div>
<p>Then <strong>EITHER</strong> push images to a remote repository:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-12-1"></a><span class="go">docker login quay.io</span>
<a name="__codelineno-12-2"></a><span class="go">cd bpfman/examples</span>
<a name="__codelineno-12-3"></a><span class="go">make IMAGE_TC_US=quay.io/$USER/go-tc-counter:latest \</span>
<a name="__codelineno-12-4"></a><span class="go">  IMAGE_TP_US=quay.io/$USER/go-tracepoint-counter:latest \</span>
<a name="__codelineno-12-5"></a><span class="go">  IMAGE_XDP_US=quay.io/$USER/go-xdp-counter:latest \</span>
<a name="__codelineno-12-6"></a><span class="go">  push-us-images</span>
</code></pre></div>
<p><strong>OR</strong> load the images directly to a specified kind cluster:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-13-1"></a><span class="go">cd bpfman/examples</span>
<a name="__codelineno-13-2"></a><span class="go">make IMAGE_TC_US=quay.io/$USER/go-tc-counter:latest \</span>
<a name="__codelineno-13-3"></a><span class="go">  IMAGE_TP_US=quay.io/$USER/go-tracepoint-counter:latest \</span>
<a name="__codelineno-13-4"></a><span class="go">  IMAGE_XDP_US=quay.io/$USER/go-xdp-counter:latest \</span>
<a name="__codelineno-13-5"></a><span class="go">  KIND_CLUSTER_NAME=bpfman-deployment \</span>
<a name="__codelineno-13-6"></a><span class="go">  load-us-images-kind</span>
</code></pre></div>
<p>Lastly, update the yaml to use the private images or override the yaml files using the Makefile:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-14-1"></a><span class="go">cd bpfman/examples/</span>
<a name="__codelineno-14-2"></a><span class="go">make deploy-xdp IMAGE_XDP_US=quay.io/$USER/go-xdp-counter:latest</span>
<a name="__codelineno-14-3"></a><span class="go">make undeploy-xdp</span>
<a name="__codelineno-14-4"></a>
<a name="__codelineno-14-5"></a><span class="go">make deploy-tc IMAGE_TC_US=quay.io/$USER/go-tc-counter:latest</span>
<a name="__codelineno-14-6"></a><span class="go">make undeploy-tc</span>
<a name="__codelineno-14-7"></a>
<a name="__codelineno-14-8"></a><span class="go">make deploy-tracepoint IMAGE_TP_US=quay.io/$USER/go-tracepoint-counter:latest</span>
<a name="__codelineno-14-9"></a><span class="go">make undeploy-tracepoint</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../example-bpf-local/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Deploying Example eBPF Programs On Local Host" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Deploying Example eBPF Programs On Local Host
            </div>
          </div>
        </a>
      
      
        
        <a href="../troubleshooting/" class="md-footer__link md-footer__link--next" aria-label="Next: Troubleshooting" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Troubleshooting
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021-2023 The bpfman contributors
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.indexes", "navigation.tabs", "navigation.tabs.sticky", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.8397ff9e.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f89c2efe.min.js"></script>
      
    
  </body>
</html>