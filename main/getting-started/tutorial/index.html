
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../img/favicon.svg">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-7.3.3">
    
    
      
        <title>Bpfman on Linux Tutorial - bpfman</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.5143246d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorial" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="bpfman" class="md-header__button md-logo" aria-label="bpfman" data-md-component="logo">
      
  <img src="../../img/favicon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            bpfman
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Bpfman on Linux Tutorial
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/bpfman/bpfman" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Introduction
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../building-bpfman/" class="md-tabs__link md-tabs__link--active">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../governance/CONTRIBUTING/" class="md-tabs__link">
        Developer Guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../design/daemonless/" class="md-tabs__link">
        Design
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../governance/MEETINGS/" class="md-tabs__link">
        Community
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../blog/" class="md-tabs__link">
        Blog
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="bpfman" class="md-nav__button md-logo" aria-label="bpfman" data-md-component="logo">
      
  <img src="../../img/favicon.svg" alt="logo">

    </a>
    bpfman
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/bpfman/bpfman" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../building-bpfman/" class="md-nav__link">
        Setup and Building
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../running-release/" class="md-nav__link">
        Run bpfman From Release Image
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Bpfman on Linux Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Bpfman on Linux Tutorial
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#local-host" class="md-nav__link">
    Local Host
  </a>
  
    <nav class="md-nav" aria-label="Local Host">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-build-bpfman" class="md-nav__link">
    Step 1: Build bpfman
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-setup-bpfman-environment" class="md-nav__link">
    Step 2: Setup bpfman environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-start-bpfman" class="md-nav__link">
    Step 3: Start bpfman
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-load-your-first-program" class="md-nav__link">
    Step 4: Load your first program
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-loading-more-programs" class="md-nav__link">
    Step 5: Loading more programs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-delete-a-program" class="md-nav__link">
    Step 6: Delete a program
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-clean-up" class="md-nav__link">
    Step 7: Clean-up
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemd-service" class="md-nav__link">
    Systemd Service
  </a>
  
    <nav class="md-nav" aria-label="Systemd Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1" class="md-nav__link">
    Step 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-setup-bpfman-environment_1" class="md-nav__link">
    Step 2: Setup bpfman environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-start-bpfman_1" class="md-nav__link">
    Step 3: Start bpfman
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-6" class="md-nav__link">
    Step 4-6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-clean-up_1" class="md-nav__link">
    Step 7: Clean-up
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-and-run-local-ebpf-programs" class="md-nav__link">
    Build and Run Local eBPF Programs
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli-guide/" class="md-nav__link">
        CLI Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf/" class="md-nav__link">
        Example eBPF Programs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf-local/" class="md-nav__link">
        Deploying Example eBPF Programs On Local Host
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example-bpf-k8s/" class="md-nav__link">
        Deploying Example eBPF Programs On Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Developer Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developer Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/CONTRIBUTING/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/REVIEWING/" class="md-nav__link">
        Reviewing Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/operator-quick-start/" class="md-nav__link">
        Deploying the bpfman-operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/develop-operator/" class="md-nav__link">
        Developing the bpfman-operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/api-spec/" class="md-nav__link">
        Kubernetes CRD API-Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/shipping-bytecode/" class="md-nav__link">
        eBPF Bytecode Image Specifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/image-build/" class="md-nav__link">
        bpfman Container Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/documentation/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/linux-capabilities/" class="md-nav__link">
        Linux Capabilities
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/debugging/" class="md-nav__link">
        Debugging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/release/" class="md-nav__link">
        Releasing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Design
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Design" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Design
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../design/daemonless/" class="md-nav__link">
        Daemonless
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Community
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Community" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/MEETINGS/" class="md-nav__link">
        Meetings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/GOVERNANCE/" class="md-nav__link">
        Governance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/CODE_OF_CONDUCT/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/MAINTAINERS/" class="md-nav__link">
        Maintainers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/SECURITY/" class="md-nav__link">
        Security
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../blog/">Blog</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Blog" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#local-host" class="md-nav__link">
    Local Host
  </a>
  
    <nav class="md-nav" aria-label="Local Host">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-build-bpfman" class="md-nav__link">
    Step 1: Build bpfman
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-setup-bpfman-environment" class="md-nav__link">
    Step 2: Setup bpfman environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-start-bpfman" class="md-nav__link">
    Step 3: Start bpfman
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-load-your-first-program" class="md-nav__link">
    Step 4: Load your first program
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-loading-more-programs" class="md-nav__link">
    Step 5: Loading more programs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-delete-a-program" class="md-nav__link">
    Step 6: Delete a program
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-clean-up" class="md-nav__link">
    Step 7: Clean-up
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemd-service" class="md-nav__link">
    Systemd Service
  </a>
  
    <nav class="md-nav" aria-label="Systemd Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1" class="md-nav__link">
    Step 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-setup-bpfman-environment_1" class="md-nav__link">
    Step 2: Setup bpfman environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-start-bpfman_1" class="md-nav__link">
    Step 3: Start bpfman
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-6" class="md-nav__link">
    Step 4-6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-clean-up_1" class="md-nav__link">
    Step 7: Clean-up
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-and-run-local-ebpf-programs" class="md-nav__link">
    Build and Run Local eBPF Programs
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/bpfman/bpfman/edit/main/docs/getting-started/tutorial.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="tutorial">Tutorial</h1>
<p>This tutorial will show you how to use <code>bpfman</code>.
There are several ways to launch and interact with <code>bpfman</code> and <code>bpfman</code>:</p>
<ul>
<li><strong>Local Host</strong> - Run <code>bpfman</code> as a privileged process straight from build directory.
  See <a href="#local-host">Local Host</a>.</li>
<li><strong>Systemd Service</strong> - Run <code>bpfman</code> as a systemd service.
  See <a href="#systemd-service">Systemd Service</a>.</li>
</ul>
<h2 id="local-host">Local Host</h2>
<h3 id="step-1-build-bpfman">Step 1: Build <code>bpfman</code></h3>
<p>Perform the following steps to build <code>bpfman</code>.
If this is your first time using bpfman, follow the instructions in
<a href="../building-bpfman/">Setup and Building bpfman</a> to setup the prerequisites for building.</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-0-1"></a><span class="go">cd $HOME/src/bpfman/</span>
<a name="__codelineno-0-2"></a><span class="go">cargo xtask build-ebpf --libbpf-dir $HOME/src/libbpf</span>
<a name="__codelineno-0-3"></a><span class="go">cargo build</span>
</code></pre></div>
<h3 id="step-2-setup-bpfman-environment">Step 2: Setup <code>bpfman</code> environment</h3>
<p><code>bpfman</code> supports both communication over a Unix socket.
All examples, both using <code>bpfman</code> and the gRPC API use this socket.</p>
<h3 id="step-3-start-bpfman">Step 3: Start <code>bpfman</code></h3>
<p>While learning and experimenting with <code>bpfman</code>, it may be useful to run <code>bpfman</code> in the foreground
(which requires a second terminal to run the <code>bpfman</code> commands below).
For more details on how logging is handled in bpfman, see <a href="../../developer-guide/logging/">Logging</a>.</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-1-1"></a><span class="go">sudo RUST_LOG=info ./target/debug/bpfman</span>
</code></pre></div>
<h3 id="step-4-load-your-first-program">Step 4: Load your first program</h3>
<p>We will load the simple <code>xdp-pass</code> program, which permits all traffic to the attached interface,
<code>vethff657c7</code> in this example.
The section in the object file that contains the program is "pass".
Finally, we will use the priority of 100.
Find a deeper dive into CLI syntax in <a href="../cli-guide/">CLI Guide</a>.</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-2-1"></a><span class="go">sudo ./target/debug/bpfman load image --image-url quay.io/bpfman-bytecode/xdp_pass:latest xdp --iface vethff657c7 --priority 100</span>
<a name="__codelineno-2-2"></a><span class="go"> Bpfman State</span>
<a name="__codelineno-2-3"></a><span class="go">---------------</span>
<a name="__codelineno-2-4"></a><span class="go"> Name:          pass</span>
<a name="__codelineno-2-5"></a><span class="go"> Image URL:     quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a name="__codelineno-2-6"></a><span class="go"> Pull Policy:   IfNotPresent</span>
<a name="__codelineno-2-7"></a><span class="go"> Global:        None</span>
<a name="__codelineno-2-8"></a><span class="go"> Metadata:      None</span>
<a name="__codelineno-2-9"></a><span class="go"> Map Pin Path:  /run/bpfman/fs/maps/6213</span>
<a name="__codelineno-2-10"></a><span class="go"> Map Owner ID:  None</span>
<a name="__codelineno-2-11"></a><span class="go"> Map Used By:   6213</span>
<a name="__codelineno-2-12"></a><span class="go"> Priority:      100</span>
<a name="__codelineno-2-13"></a><span class="go"> Iface:         vethff657c7</span>
<a name="__codelineno-2-14"></a><span class="go"> Position:      0</span>
<a name="__codelineno-2-15"></a><span class="go"> Proceed On:    pass, dispatcher_return</span>
<a name="__codelineno-2-16"></a>
<a name="__codelineno-2-17"></a><span class="go"> Kernel State</span>
<a name="__codelineno-2-18"></a><span class="go">----------------------------------</span>
<a name="__codelineno-2-19"></a><span class="go"> ID:                               6213</span>
<a name="__codelineno-2-20"></a><span class="go"> Name:                             pass</span>
<a name="__codelineno-2-21"></a><span class="go"> Type:                             xdp</span>
<a name="__codelineno-2-22"></a><span class="go"> Loaded At:                        2023-07-17T17:48:10-0400</span>
<a name="__codelineno-2-23"></a><span class="go"> Tag:                              4b9d1b2c140e87ce</span>
<a name="__codelineno-2-24"></a><span class="go"> GPL Compatible:                   true</span>
<a name="__codelineno-2-25"></a><span class="go"> Map IDs:                          [2724]</span>
<a name="__codelineno-2-26"></a><span class="go"> BTF ID:                           2834</span>
<a name="__codelineno-2-27"></a><span class="go"> Size Translated (bytes):          96</span>
<a name="__codelineno-2-28"></a><span class="go"> JITed:                            true</span>
<a name="__codelineno-2-29"></a><span class="go"> Size JITed (bytes):               67</span>
<a name="__codelineno-2-30"></a><span class="go"> Kernel Allocated Memory (bytes):  4096</span>
<a name="__codelineno-2-31"></a><span class="go"> Verified Instruction Count:       9</span>
</code></pre></div>
<p><code>bpfman load image</code> returns the same data as a <code>bpfman get</code> command.
From the output, the id of <code>6213</code> can be found in the <code>Kernel State</code> section.
This id can be used to perform a <code>bpfman get</code> to retrieve all relevant program
data and a <code>bpfman unload</code> when the program needs to be unloaded.</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-3-1"></a><span class="go">sudo ./target/debug/bpfman list</span>
<a name="__codelineno-3-2"></a><span class="go"> Program ID  Name  Type  Load Time</span>
<a name="__codelineno-3-3"></a><span class="go"> 6213        pass  xdp   2023-07-17T17:48:10-0400</span>
</code></pre></div>
<p>We can recheck the details about the loaded program with the <code>bpfman get</code> command:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-4-1"></a><span class="go">sudo ./target/debug/bpfman get 6213</span>
<a name="__codelineno-4-2"></a><span class="go"> Bpfman State</span>
<a name="__codelineno-4-3"></a><span class="go">---------------</span>
<a name="__codelineno-4-4"></a><span class="go"> Name:          pass</span>
<a name="__codelineno-4-5"></a><span class="go"> Image URL:     quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a name="__codelineno-4-6"></a><span class="go"> Pull Policy:   IfNotPresent</span>
<a name="__codelineno-4-7"></a><span class="go"> Global:        None</span>
<a name="__codelineno-4-8"></a><span class="go"> Metadata:      None</span>
<a name="__codelineno-4-9"></a><span class="go"> Map Pin Path:  /run/bpfman/fs/maps/6213</span>
<a name="__codelineno-4-10"></a><span class="go"> Map Owner ID:  None</span>
<a name="__codelineno-4-11"></a><span class="go"> Map Used By:   6213</span>
<a name="__codelineno-4-12"></a><span class="go"> Priority:      100</span>
<a name="__codelineno-4-13"></a><span class="go"> Iface:         vethff657c7</span>
<a name="__codelineno-4-14"></a><span class="go"> Position:      0</span>
<a name="__codelineno-4-15"></a><span class="go"> Proceed On:    pass, dispatcher_return</span>
<a name="__codelineno-4-16"></a>
<a name="__codelineno-4-17"></a><span class="go"> Kernel State</span>
<a name="__codelineno-4-18"></a><span class="go">----------------------------------</span>
<a name="__codelineno-4-19"></a><span class="go"> ID:                               6213</span>
<a name="__codelineno-4-20"></a><span class="go"> Name:                             pass</span>
<a name="__codelineno-4-21"></a><span class="go"> Type:                             xdp</span>
<a name="__codelineno-4-22"></a><span class="go"> Loaded At:                        2023-07-17T17:48:10-0400</span>
<a name="__codelineno-4-23"></a><span class="go"> Tag:                              4b9d1b2c140e87ce</span>
<a name="__codelineno-4-24"></a><span class="go"> GPL Compatible:                   true</span>
<a name="__codelineno-4-25"></a><span class="go"> Map IDs:                          [2724]</span>
<a name="__codelineno-4-26"></a><span class="go"> BTF ID:                           2834</span>
<a name="__codelineno-4-27"></a><span class="go"> Size Translated (bytes):          96</span>
<a name="__codelineno-4-28"></a><span class="go"> JITed:                            true</span>
<a name="__codelineno-4-29"></a><span class="go"> Size JITed (bytes):               67</span>
<a name="__codelineno-4-30"></a><span class="go"> Kernel Allocated Memory (bytes):  4096</span>
<a name="__codelineno-4-31"></a><span class="go"> Verified Instruction Count:       9</span>
</code></pre></div>
<p>From the output above you can see the program was loaded to position 0 on our
interface and thus will be executed first.</p>
<h3 id="step-5-loading-more-programs">Step 5: Loading more programs</h3>
<p>We will now load 2 more programs with different priorities to demonstrate how bpfman will ensure they are ordered correctly:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-5-1"></a><span class="go">sudo ./target/debug/bpfman load image --image-url quay.io/bpfman-bytecode/xdp_pass:latest xdp --iface vethff657c7 --priority 50</span>
<a name="__codelineno-5-2"></a><span class="go"> Bpfman State</span>
<a name="__codelineno-5-3"></a><span class="go">---------------</span>
<a name="__codelineno-5-4"></a><span class="go"> Name:          pass</span>
<a name="__codelineno-5-5"></a><span class="go"> Image URL:     quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a name="__codelineno-5-6"></a><span class="go"> Pull Policy:   IfNotPresent</span>
<a name="__codelineno-5-7"></a><span class="go"> Global:        None</span>
<a name="__codelineno-5-8"></a><span class="go"> Metadata:      None</span>
<a name="__codelineno-5-9"></a><span class="go"> Map Pin Path:  /run/bpfman/fs/maps/6215</span>
<a name="__codelineno-5-10"></a><span class="go"> Map Owner ID:  None</span>
<a name="__codelineno-5-11"></a><span class="go"> Map Used By:   6215</span>
<a name="__codelineno-5-12"></a><span class="go"> Priority:      50</span>
<a name="__codelineno-5-13"></a><span class="go"> Iface:         vethff657c7</span>
<a name="__codelineno-5-14"></a><span class="go"> Position:      0</span>
<a name="__codelineno-5-15"></a><span class="go"> Proceed On:    pass, dispatcher_return</span>
<a name="__codelineno-5-16"></a>
<a name="__codelineno-5-17"></a><span class="go"> Kernel State</span>
<a name="__codelineno-5-18"></a><span class="go">----------------------------------</span>
<a name="__codelineno-5-19"></a><span class="go"> ID:                               6215</span>
<a name="__codelineno-5-20"></a><span class="go"> Name:                             pass</span>
<a name="__codelineno-5-21"></a><span class="go"> Type:                             xdp</span>
<a name="__codelineno-5-22"></a><span class="go">:</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a name="__codelineno-6-1"></a><span class="go">sudo ./target/debug/bpfman load image --image-url quay.io/bpfman-bytecode/xdp_pass:latest xdp --iface vethff657c7 --priority 200</span>
<a name="__codelineno-6-2"></a><span class="go"> Bpfman State</span>
<a name="__codelineno-6-3"></a><span class="go">---------------</span>
<a name="__codelineno-6-4"></a><span class="go"> Name:          pass</span>
<a name="__codelineno-6-5"></a><span class="go"> Image URL:     quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a name="__codelineno-6-6"></a><span class="go"> Pull Policy:   IfNotPresent</span>
<a name="__codelineno-6-7"></a><span class="go"> Global:        None</span>
<a name="__codelineno-6-8"></a><span class="go"> Metadata:      None</span>
<a name="__codelineno-6-9"></a><span class="go"> Map Pin Path:  /run/bpfman/fs/maps/6217</span>
<a name="__codelineno-6-10"></a><span class="go"> Map Owner ID:  None</span>
<a name="__codelineno-6-11"></a><span class="go"> Map Used By:   6217</span>
<a name="__codelineno-6-12"></a><span class="go"> Priority:      200</span>
<a name="__codelineno-6-13"></a><span class="go"> Iface:         vethff657c7</span>
<a name="__codelineno-6-14"></a><span class="go"> Position:      2</span>
<a name="__codelineno-6-15"></a><span class="go"> Proceed On:    pass, dispatcher_return</span>
<a name="__codelineno-6-16"></a>
<a name="__codelineno-6-17"></a><span class="go"> Kernel State</span>
<a name="__codelineno-6-18"></a><span class="go">----------------------------------</span>
<a name="__codelineno-6-19"></a><span class="go"> ID:                               6217</span>
<a name="__codelineno-6-20"></a><span class="go"> Name:                             pass</span>
<a name="__codelineno-6-21"></a><span class="go"> Type:                             xdp</span>
<a name="__codelineno-6-22"></a><span class="go">:</span>
</code></pre></div>
<p>Using <code>bpfman list</code> we can see all the programs that were loaded.</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-7-1"></a><span class="go">sudo ./target/debug/bpfman list</span>
<a name="__codelineno-7-2"></a><span class="go"> Program ID  Name  Type  Load Time</span>
<a name="__codelineno-7-3"></a><span class="go"> 6213        pass  xdp   2023-07-17T17:48:10-0400</span>
<a name="__codelineno-7-4"></a><span class="go"> 6215        pass  xdp   2023-07-17T17:52:46-0400</span>
<a name="__codelineno-7-5"></a><span class="go"> 6217        pass  xdp   2023-07-17T17:53:57-0400</span>
</code></pre></div>
<p>The lowest priority program is executed first, while the highest is executed last.
As can be seen from the detailed output for each command below:</p>
<ul>
<li>Program <code>6215</code> is at position <code>0</code> with a priority of <code>50</code></li>
<li>Program <code>6213</code> is at position <code>1</code> with a priority of <code>100</code></li>
<li>Program <code>6217</code> is at position <code>2</code> with a priority of <code>200</code></li>
</ul>
<div class="highlight"><pre><span></span><code><a name="__codelineno-8-1"></a><span class="go">sudo ./target/debug/bpfman get 6213</span>
<a name="__codelineno-8-2"></a><span class="go"> Bpfman State</span>
<a name="__codelineno-8-3"></a><span class="go">---------------</span>
<a name="__codelineno-8-4"></a><span class="go"> Name:          pass</span>
<a name="__codelineno-8-5"></a><span class="go">:</span>
<a name="__codelineno-8-6"></a><span class="go"> Priority:      100</span>
<a name="__codelineno-8-7"></a><span class="go"> Iface:         vethff657c7</span>
<a name="__codelineno-8-8"></a><span class="go"> Position:      1</span>
<a name="__codelineno-8-9"></a><span class="go"> Proceed On:    pass, dispatcher_return</span>
<a name="__codelineno-8-10"></a>
<a name="__codelineno-8-11"></a><span class="go"> Kernel State</span>
<a name="__codelineno-8-12"></a><span class="go">----------------------------------</span>
<a name="__codelineno-8-13"></a><span class="go"> ID:                               6213</span>
<a name="__codelineno-8-14"></a><span class="go"> Name:                             pass</span>
<a name="__codelineno-8-15"></a><span class="go"> Type:                             xdp</span>
<a name="__codelineno-8-16"></a><span class="go">:</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a name="__codelineno-9-1"></a><span class="go">sudo ./target/debug/bpfman get 6215</span>
<a name="__codelineno-9-2"></a><span class="go"> Bpfman State</span>
<a name="__codelineno-9-3"></a><span class="go">---------------</span>
<a name="__codelineno-9-4"></a><span class="go"> Name:          pass</span>
<a name="__codelineno-9-5"></a><span class="go">:</span>
<a name="__codelineno-9-6"></a><span class="go"> Priority:      50</span>
<a name="__codelineno-9-7"></a><span class="go"> Iface:         vethff657c7</span>
<a name="__codelineno-9-8"></a><span class="go"> Position:      0</span>
<a name="__codelineno-9-9"></a><span class="go"> Proceed On:    pass, dispatcher_return</span>
<a name="__codelineno-9-10"></a>
<a name="__codelineno-9-11"></a><span class="go"> Kernel State</span>
<a name="__codelineno-9-12"></a><span class="go">----------------------------------</span>
<a name="__codelineno-9-13"></a><span class="go"> ID:                               6215</span>
<a name="__codelineno-9-14"></a><span class="go"> Name:                             pass</span>
<a name="__codelineno-9-15"></a><span class="go"> Type:                             xdp</span>
<a name="__codelineno-9-16"></a><span class="go">:</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a name="__codelineno-10-1"></a><span class="go">sudo ./target/debug/bpfman get 6217</span>
<a name="__codelineno-10-2"></a><span class="go"> Bpfman State</span>
<a name="__codelineno-10-3"></a><span class="go">---------------</span>
<a name="__codelineno-10-4"></a><span class="go"> Name:          pass</span>
<a name="__codelineno-10-5"></a><span class="go">:</span>
<a name="__codelineno-10-6"></a><span class="go"> Priority:      200</span>
<a name="__codelineno-10-7"></a><span class="go"> Iface:         vethff657c7</span>
<a name="__codelineno-10-8"></a><span class="go"> Position:      2</span>
<a name="__codelineno-10-9"></a><span class="go"> Proceed On:    pass, dispatcher_return</span>
<a name="__codelineno-10-10"></a>
<a name="__codelineno-10-11"></a><span class="go"> Kernel State</span>
<a name="__codelineno-10-12"></a><span class="go">----------------------------------</span>
<a name="__codelineno-10-13"></a><span class="go"> ID:                               6217</span>
<a name="__codelineno-10-14"></a><span class="go"> Name:                             pass</span>
<a name="__codelineno-10-15"></a><span class="go"> Type:                             xdp</span>
<a name="__codelineno-10-16"></a><span class="go">:</span>
</code></pre></div>
<p>By default, the next program in the chain will only be executed if a given program returns
<code>pass</code> (see <code>proceed-on</code> field in the <code>bpfman get</code> output above).
If the next program in the chain should be called even if a different value is returned,
then the program can be loaded with those additional return values using the <code>proceed-on</code>
parameter (see <code>bpfman load image xdp --help</code> for list of valid values):</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-11-1"></a><span class="go">sudo ./target/debug/bpfman load image --image-url quay.io/bpfman-bytecode/xdp_pass:latest xdp --iface vethff657c7 --priority 150 --proceed-on &quot;pass&quot; --proceed-on &quot;dispatcher_return&quot;</span>
<a name="__codelineno-11-2"></a><span class="go"> Bpfman State</span>
<a name="__codelineno-11-3"></a><span class="go">---------------</span>
<a name="__codelineno-11-4"></a><span class="go"> Name:          pass</span>
<a name="__codelineno-11-5"></a><span class="go"> Image URL:     quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a name="__codelineno-11-6"></a><span class="go"> Pull Policy:   IfNotPresent</span>
<a name="__codelineno-11-7"></a><span class="go"> Global:        None</span>
<a name="__codelineno-11-8"></a><span class="go"> Metadata:      None</span>
<a name="__codelineno-11-9"></a><span class="go"> Map Pin Path:  /run/bpfman/fs/maps/6219</span>
<a name="__codelineno-11-10"></a><span class="go"> Map Owner ID:  None</span>
<a name="__codelineno-11-11"></a><span class="go"> Map Used By:   6219</span>
<a name="__codelineno-11-12"></a><span class="go"> Priority:      150</span>
<a name="__codelineno-11-13"></a><span class="go"> Iface:         vethff657c7</span>
<a name="__codelineno-11-14"></a><span class="go"> Position:      2</span>
<a name="__codelineno-11-15"></a><span class="go"> Proceed On:    pass, dispatcher_return</span>
<a name="__codelineno-11-16"></a>
<a name="__codelineno-11-17"></a><span class="go"> Kernel State</span>
<a name="__codelineno-11-18"></a><span class="go">----------------------------------</span>
<a name="__codelineno-11-19"></a><span class="go"> ID:                               6219</span>
<a name="__codelineno-11-20"></a><span class="go"> Name:                             pass</span>
<a name="__codelineno-11-21"></a><span class="go"> Type:                             xdp</span>
<a name="__codelineno-11-22"></a><span class="go">:</span>
</code></pre></div>
<p>Which results in being loaded in position <code>2</code> because it was loaded at priority <code>150</code>,
which is lower than the previous program at that position with a priority of <code>200</code>.</p>
<h3 id="step-6-delete-a-program">Step 6: Delete a program</h3>
<p>Let's remove the program at position 1.</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-12-1"></a><span class="go">sudo ./target/debug/bpfman list</span>
<a name="__codelineno-12-2"></a><span class="go"> Program ID  Name  Type  Load Time</span>
<a name="__codelineno-12-3"></a><span class="go"> 6213        pass  xdp   2023-07-17T17:48:10-0400</span>
<a name="__codelineno-12-4"></a><span class="go"> 6215        pass  xdp   2023-07-17T17:52:46-0400</span>
<a name="__codelineno-12-5"></a><span class="go"> 6217        pass  xdp   2023-07-17T17:53:57-0400</span>
<a name="__codelineno-12-6"></a><span class="go"> 6219        pass  xdp   2023-07-17T17:59:41-0400</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a name="__codelineno-13-1"></a><span class="go">sudo ./target/debug/bpfman unload 6213</span>
</code></pre></div>
<p>And we can verify that it has been removed and the other programs re-ordered:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-14-1"></a><span class="go">sudo ./target/debug/bpfman list</span>
<a name="__codelineno-14-2"></a><span class="go"> Program ID  Name  Type  Load Time</span>
<a name="__codelineno-14-3"></a><span class="go"> 6215        pass  xdp   2023-07-17T17:52:46-0400</span>
<a name="__codelineno-14-4"></a><span class="go"> 6217        pass  xdp   2023-07-17T17:53:57-0400</span>
<a name="__codelineno-14-5"></a><span class="go"> 6219        pass  xdp   2023-07-17T17:59:41-0400</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a name="__codelineno-15-1"></a><span class="go">./target/debug/bpfman get 6215</span>
<a name="__codelineno-15-2"></a><span class="go"> Bpfman State</span>
<a name="__codelineno-15-3"></a><span class="go">---------------</span>
<a name="__codelineno-15-4"></a><span class="go"> Name:          pass</span>
<a name="__codelineno-15-5"></a><span class="go"> Image URL:     quay.io/bpfman-bytecode/xdp_pass:latest</span>
<a name="__codelineno-15-6"></a><span class="go"> Pull Policy:   IfNotPresent</span>
<a name="__codelineno-15-7"></a><span class="go"> Global:        None</span>
<a name="__codelineno-15-8"></a><span class="go"> Metadata:      None</span>
<a name="__codelineno-15-9"></a><span class="go"> Map Pin Path:  /run/bpfman/fs/maps/6215</span>
<a name="__codelineno-15-10"></a><span class="go"> Map Owner ID:  None</span>
<a name="__codelineno-15-11"></a><span class="go"> Map Used By:   6215</span>
<a name="__codelineno-15-12"></a><span class="go"> Priority:      50</span>
<a name="__codelineno-15-13"></a><span class="go"> Iface:         vethff657c7</span>
<a name="__codelineno-15-14"></a><span class="go"> Position:      0</span>
<a name="__codelineno-15-15"></a><span class="go"> Proceed On:    pass, dispatcher_return</span>
<a name="__codelineno-15-16"></a>
<a name="__codelineno-15-17"></a><span class="go"> Kernel State</span>
<a name="__codelineno-15-18"></a><span class="go">----------------------------------</span>
<a name="__codelineno-15-19"></a><span class="go"> ID:                               6215</span>
<a name="__codelineno-15-20"></a><span class="go"> Name:                             pass</span>
<a name="__codelineno-15-21"></a><span class="go"> Type:                             xdp</span>
<a name="__codelineno-15-22"></a><span class="go">:</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a name="__codelineno-16-1"></a>./target/debug/bpfman get 6217
<a name="__codelineno-16-2"></a> Bpfman State
<a name="__codelineno-16-3"></a>---------------
<a name="__codelineno-16-4"></a> Name:          pass
<a name="__codelineno-16-5"></a> Image URL:     quay.io/bpfman-bytecode/xdp_pass:latest
<a name="__codelineno-16-6"></a> Pull Policy:   IfNotPresent
<a name="__codelineno-16-7"></a> Global:        None
<a name="__codelineno-16-8"></a> Metadata:      None
<a name="__codelineno-16-9"></a> Map Pin Path:  /run/bpfman/fs/maps/6217
<a name="__codelineno-16-10"></a> Map Owner ID:  None
<a name="__codelineno-16-11"></a> Map Used By:   6217
<a name="__codelineno-16-12"></a> Priority:      200
<a name="__codelineno-16-13"></a> Iface:         vethff657c7
<a name="__codelineno-16-14"></a> Position:      2
<a name="__codelineno-16-15"></a> Proceed On:    pass, dispatcher_return
<a name="__codelineno-16-16"></a>
<a name="__codelineno-16-17"></a> Kernel State
<a name="__codelineno-16-18"></a>----------------------------------
<a name="__codelineno-16-19"></a> ID:                               6217
<a name="__codelineno-16-20"></a> Name:                             pass
<a name="__codelineno-16-21"></a> Type:                             xdp
<a name="__codelineno-16-22"></a>:
</code></pre></div>
<div class="highlight"><pre><span></span><code><a name="__codelineno-17-1"></a>./target/debug/bpfman get 6219
<a name="__codelineno-17-2"></a> Bpfman State
<a name="__codelineno-17-3"></a>---------------
<a name="__codelineno-17-4"></a> Name:          pass
<a name="__codelineno-17-5"></a> Image URL:     quay.io/bpfman-bytecode/xdp_pass:latest
<a name="__codelineno-17-6"></a> Pull Policy:   IfNotPresent
<a name="__codelineno-17-7"></a> Global:        None
<a name="__codelineno-17-8"></a> Metadata:      None
<a name="__codelineno-17-9"></a> Map Pin Path:  /run/bpfman/fs/maps/6219
<a name="__codelineno-17-10"></a> Map Owner ID:  None
<a name="__codelineno-17-11"></a> Map Used By:   6219
<a name="__codelineno-17-12"></a> Priority:      150
<a name="__codelineno-17-13"></a> Iface:         vethff657c7
<a name="__codelineno-17-14"></a> Position:      1
<a name="__codelineno-17-15"></a> Proceed On:    pass, dispatcher_return
<a name="__codelineno-17-16"></a>
<a name="__codelineno-17-17"></a> Kernel State
<a name="__codelineno-17-18"></a>----------------------------------
<a name="__codelineno-17-19"></a> ID:                               6219
<a name="__codelineno-17-20"></a> Name:                             pass
<a name="__codelineno-17-21"></a> Type:                             xdp
<a name="__codelineno-17-22"></a>:
</code></pre></div>
<p>When <code>bpfman</code> is stopped, all remaining programs will be unloaded automatically.</p>
<h3 id="step-7-clean-up">Step 7: Clean-up</h3>
<p>To unwind all the changes, stop <code>bpfman</code> and then run the following script:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-18-1"></a><span class="go">sudo ./scripts/setup.sh uninstall</span>
</code></pre></div>
<p><strong>WARNING:</strong> <code>setup.sh uninstall</code> cleans everything up, so <code>/etc/bpfman/programs.d/</code>
and <code>/run/bpfman/bytecode/</code> are deleted. Save any changes or files that were created if needed.</p>
<h2 id="systemd-service">Systemd Service</h2>
<p>To run <code>bpfman</code> as a systemd service, the binaries will be placed in a well known location
(<code>/usr/sbin/.</code>) and a service configuration file will be added
(<code>/usr/lib/systemd/system/bpfman.service</code>).
When run as a systemd service, the set of linux capabilities are limited to only the needed set.
If permission errors are encountered, see <a href="../../developer-guide/linux-capabilities/">Linux Capabilities</a>
for help debugging.</p>
<h3 id="step-1">Step 1</h3>
<p>Same as Step 1 above, build <code>bpfman</code> if needed:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-19-1"></a><span class="go">cd $HOME/src/bpfman/</span>
<a name="__codelineno-19-2"></a><span class="go">cargo xtask build-ebpf --libbpf-dir $HOME/src/libbpf</span>
<a name="__codelineno-19-3"></a><span class="go">cargo build</span>
</code></pre></div>
<h3 id="step-2-setup-bpfman-environment_1">Step 2: Setup <code>bpfman</code> environment</h3>
<p>Run the following command to copy the <code>bpfman</code> and <code>bpfman</code> binaries to <code>/usr/sbin/</code> and copy a
default <code>bpfman.service</code> file to <code>/usr/lib/systemd/system/</code>.
This option will also start the systemd service <code>bpfman.service</code> by default:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-20-1"></a><span class="go">sudo ./scripts/setup.sh install</span>
</code></pre></div>
<blockquote>
<p><strong><em>NOTE:</em></strong> Prior to <strong>kernel 5.19</strong>, all eBPF sys calls required CAP_BPF, which are used to access maps shared
between the BFP program and the userspace program.
So userspace programs that are accessing maps and running on kernels older than 5.19 will require either <code>sudo</code>
or the CAP_BPF capability (<code>sudo /sbin/setcap cap_bpf=ep ./&lt;USERSPACE-PROGRAM&gt;</code>).</p>
</blockquote>
<p>To update the configuration settings associated with running <code>bpfman</code> as a service, edit the
service configuration file:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-21-1"></a><span class="go">sudo vi /usr/lib/systemd/system/bpfman.service</span>
<a name="__codelineno-21-2"></a><span class="go">sudo systemctl daemon-reload</span>
</code></pre></div>
<p>If <code>bpfman</code> or <code>bpfman</code> is rebuilt, the following command can be run to install the update binaries
without regenerating the certifications.
The <code>bpfman</code> service will is automatically restarted.</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-22-1"></a><span class="go">sudo ./scripts/setup.sh reinstall</span>
</code></pre></div>
<h3 id="step-3-start-bpfman_1">Step 3: Start <code>bpfman</code></h3>
<p>To manage <code>bpfman</code> as a systemd service, use <code>systemctl</code>. <code>sudo ./scripts/setup.sh install</code> will start the service,
but the service can be manually stopped and started:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-23-1"></a><span class="go">sudo systemctl stop bpfman.service</span>
<a name="__codelineno-23-2"></a><span class="go">...</span>
<a name="__codelineno-23-3"></a><span class="go">sudo systemctl start bpfman.service</span>
</code></pre></div>
<h3 id="step-4-6">Step 4-6</h3>
<p>Same as above except <code>bpfman</code> is now in $PATH:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-24-1"></a><span class="go">sudo bpfman load image --image-url quay.io/bpfman-bytecode/xdp_pass:latest xdp --iface vethff657c7 --priority 100</span>
<a name="__codelineno-24-2"></a><span class="go">:</span>
<a name="__codelineno-24-3"></a>
<a name="__codelineno-24-4"></a>
<a name="__codelineno-24-5"></a><span class="go">sudo bpfman list</span>
<a name="__codelineno-24-6"></a><span class="go"> Program ID  Name  Type  Load Time</span>
<a name="__codelineno-24-7"></a><span class="go"> 6213        pass  xdp   2023-07-17T17:48:10-0400</span>
<a name="__codelineno-24-8"></a>
<a name="__codelineno-24-9"></a>
<a name="__codelineno-24-10"></a><span class="go">sudo bpfman unload 6213</span>
</code></pre></div>
<h3 id="step-7-clean-up_1">Step 7: Clean-up</h3>
<p>To unwind all the changes performed while running <code>bpfman</code> as a systemd service, run the following
script. This command cleans up everything, including stopping the <code>bpfman</code> service if it is still
running.</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-25-1"></a><span class="go">sudo ./scripts/setup.sh uninstall</span>
</code></pre></div>
<p><strong>WARNING:</strong> <code>setup.sh uninstall</code> cleans everything up, so <code>/etc/bpfman/programs.d/</code>
and <code>/run/bpfman/bytecode/</code> are deleted. Save any changes or files that were created if needed.</p>
<h2 id="build-and-run-local-ebpf-programs">Build and Run Local eBPF Programs</h2>
<p>In the examples above, all the eBPF programs were pulled from pre-built images.
This tutorial uses examples from the <a href="https://github.com/xdp-project/xdp-tutorial">xdp-tutorial</a>.
The pre-built container images can be found here:
<a href="https://quay.io/organization/bpfman-bytecode">https://quay.io/organization/bpfman-bytecode</a></p>
<p>To build these examples locally, check out the
<a href="https://github.com/xdp-project/xdp-tutorial">xdp-tutorial</a> git repository and
compile the examples.
<a href="../../developer-guide/shipping-bytecode/">eBPF Bytecode Image Specifications</a> describes how eBPF
bytecode ispackaged in container images.</p>
<p>To load these programs locally, use the <code>bpfman load file</code> command in place of the
<code>bpfman load image</code> command.
For example:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-26-1"></a><span class="go">sudo ./target/debug/bpfman load file --path /$HOME/src/xdp-tutorial/basic01-xdp-pass/xdp_pass_kern.o --name &quot;pass&quot; xdp --iface vethff657c7 --priority 100</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../running-release/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Run bpfman From Release Image" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Run bpfman From Release Image
            </div>
          </div>
        </a>
      
      
        
        <a href="../cli-guide/" class="md-footer__link md-footer__link--next" aria-label="Next: CLI Guide" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              CLI Guide
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021-2023 The bpfman contributors
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.indexes", "navigation.tabs", "navigation.tabs.sticky", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.8397ff9e.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f89c2efe.min.js"></script>
      
    
  </body>
</html>